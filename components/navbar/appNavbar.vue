<template>
  <b-navbar toggleable="lg" type="light" class="app-navbar">
    <b-navbar-brand :to="localePath('index')">
      <svg
        class="logo-image w-14 h-14"
        width="114"
        height="170"
        viewBox="0 0 114 170"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0)">
          <path
            d="M81.5035 57.21L105.935 56.68C106.409 56.68 106.944 56.44 106.944 57.34C107.287 67 105.633 76.24 100.894 84.72C92.4944 99.59 79.7995 108.62 62.7183 110.85C35.5941 114.41 9.75048 97.28 2.21822 71.13C-0.174114 62.9126 -0.625762 54.2591 0.898299 45.8407C2.42236 37.4222 5.88117 29.465 11.0065 22.5862C16.1318 15.7074 22.7859 10.0918 30.4528 6.17486C38.1196 2.25797 46.5932 0.145065 55.2163 0C55.9624 0 56.1641 0.19 56.154 0.93C56.154 6.37 56.154 11.81 56.154 17.25C56.154 18.04 55.912 18.25 55.1457 18.25C46.4887 18.4586 38.1676 21.6149 31.5797 27.1887C24.9917 32.7625 20.5381 40.4146 18.9666 48.86C14.9333 69.32 29.3323 89.5 50.225 92.68C51.8546 92.9316 53.4976 93.0885 55.1457 93.15C55.8414 93.15 56.033 92.96 56.033 92.28C55.9927 83.24 55.9759 74.2033 55.9826 65.17C55.9826 62.93 56.0431 60.69 55.9826 58.45C55.9826 57.56 56.1944 57.32 57.1119 57.32C64.7753 57.32 72.4386 57.22 80.0919 57.15H81.5439L81.5035 57.21Z"
            fill="#333366"
          />
          <path
            d="M101.63 32.3C102.248 35.943 101.694 39.6867 100.047 43C98.2947 46.7383 95.3891 49.8271 91.7501 51.8197C88.1112 53.8123 83.9275 54.6054 79.804 54.0843C75.6806 53.5633 71.8311 51.7551 68.8122 48.9212C65.7934 46.0873 63.7616 42.3746 63.0107 38.32C62.2846 34.7794 62.6609 31.1036 64.0896 27.78C63.9585 29.11 64.9669 29.78 65.8038 30.5C70.1496 34.0675 74.9628 37.0345 80.112 39.32C81.2558 39.8366 82.5415 39.9563 83.7622 39.66C89.0748 38.5082 94.2158 36.6833 99.0586 34.23C100.043 33.7725 100.919 33.1149 101.63 32.3Z"
            fill="#FE9901"
          />
          <path
            d="M56.7389 14.32C66.3382 12.2 75.6754 10.13 84.9722 8.05001C85.3576 7.95337 85.7651 7.99591 86.1217 8.17001L111.663 19.77C111.844 19.85 112.006 19.96 112.429 20.2C110.312 20.68 108.396 21.13 106.52 21.54C99.22 23.11 91.8995 24.66 84.5991 26.25C84.1383 26.3759 83.6481 26.3442 83.2076 26.16C74.5427 22.46 65.9315 18.64 57.3741 14.7L56.7389 14.32Z"
            fill="#333366"
          />
          <path
            d="M101.63 32.3C100.92 33.1185 100.044 33.7795 99.0586 34.24C94.2158 36.6933 89.0748 38.5182 83.7622 39.67C82.5415 39.9663 81.2558 39.8466 80.112 39.33C74.9628 37.0445 70.1496 34.0775 65.8038 30.51C64.9669 29.81 63.9585 29.12 64.0896 27.79C64.7256 25.8122 65.2109 23.7899 65.5416 21.74C65.7332 20.85 65.9651 20.74 66.7819 21.11C72.116 23.42 77.4803 25.67 82.8144 27.97C83.3547 28.226 83.9683 28.2861 84.5487 28.14C89.7921 27 95.0858 25.81 100.38 24.61C101.237 24.42 101.6 24.45 101.569 25.48C101.529 27.75 101.61 30 101.63 32.3Z"
            fill="#333366"
          />
          <path
            d="M18.8128 134.952C18.1984 135.635 17.2997 136.185 16.1165 136.602C14.9333 137.019 13.6363 137.228 12.2255 137.228C10.0563 137.228 8.32324 136.564 7.02627 135.237C5.7293 133.909 5.0353 132.062 4.94429 129.696L4.93291 128.263C4.93291 126.632 5.22113 125.21 5.79756 123.996C6.37399 122.775 7.19692 121.838 8.26636 121.186C9.34338 120.526 10.5873 120.196 11.998 120.196C14.061 120.196 15.6614 120.67 16.7991 121.618C17.9444 122.559 18.6118 123.966 18.8014 125.839H14.956C14.8195 124.914 14.5237 124.254 14.0686 123.86C13.6135 123.465 12.9688 123.268 12.1345 123.268C11.1333 123.268 10.3597 123.693 9.81362 124.542C9.26753 125.392 8.99069 126.605 8.98311 128.183V129.184C8.98311 130.837 9.26374 132.081 9.825 132.916C10.3938 133.742 11.285 134.156 12.4986 134.156C13.5377 134.156 14.3113 133.924 14.8195 133.462V130.891H12.0435V128.149H18.8128V134.952ZM28.4036 128.16L27.1407 128.069C25.9348 128.069 25.1611 128.448 24.8198 129.207V137H20.9858V124.69H24.5809L24.7061 126.272C25.3507 125.066 26.2495 124.463 27.4024 124.463C27.812 124.463 28.1684 124.508 28.4718 124.599L28.4036 128.16ZM35.5142 137.228C33.6256 137.228 32.0973 136.666 30.9292 135.544C29.7612 134.414 29.1772 132.946 29.1772 131.141V130.822C29.1772 129.563 29.4085 128.452 29.8712 127.489C30.3414 126.526 31.0241 125.782 31.919 125.259C32.814 124.728 33.8759 124.463 35.1046 124.463C36.8339 124.463 38.1991 125.001 39.2003 126.078C40.2015 127.148 40.702 128.642 40.702 130.561V132.051H33.0795C33.216 132.741 33.5156 133.284 33.9783 133.678C34.4409 134.072 35.0401 134.27 35.7758 134.27C36.9894 134.27 37.9374 133.845 38.6201 132.995L40.3721 135.066C39.8943 135.726 39.2155 136.253 38.3356 136.647C37.4634 137.034 36.5229 137.228 35.5142 137.228ZM35.0818 127.421C33.9593 127.421 33.2919 128.164 33.0795 129.65H36.9477V129.355C36.9628 128.74 36.8073 128.266 36.4812 127.933C36.1551 127.591 35.6886 127.421 35.0818 127.421ZM49.1893 137C49.0527 136.75 48.9314 136.382 48.8252 135.896C48.1198 136.784 47.1338 137.228 45.8672 137.228C44.7067 137.228 43.7207 136.879 42.9092 136.181C42.0976 135.475 41.6918 134.592 41.6918 133.53C41.6918 132.195 42.1848 131.186 43.1708 130.504C44.1569 129.821 45.5903 129.48 47.4713 129.48H48.6545V128.831C48.6545 127.701 48.1653 127.136 47.1869 127.136C46.2768 127.136 45.8217 127.584 45.8217 128.479H41.9876C41.9876 127.288 42.492 126.321 43.5008 125.578C44.5171 124.834 45.8103 124.463 47.3803 124.463C48.9503 124.463 50.1904 124.846 51.1006 125.612C52.0107 126.378 52.4772 127.428 52.5 128.763V134.213C52.5151 135.343 52.6896 136.207 53.0233 136.807V137H49.1893ZM46.7887 134.497C47.2666 134.497 47.661 134.395 47.9719 134.19C48.2905 133.985 48.518 133.754 48.6545 133.496V131.528H47.5396C46.2047 131.528 45.5373 132.127 45.5373 133.325C45.5373 133.674 45.6548 133.959 45.8899 134.179C46.1251 134.391 46.4247 134.497 46.7887 134.497ZM59.0986 121.63V124.69H61.1237V127.352H59.0986V132.984C59.0986 133.447 59.182 133.769 59.3489 133.951C59.5157 134.133 59.8457 134.224 60.3387 134.224C60.7179 134.224 61.0365 134.201 61.2943 134.156V136.898C60.6041 137.118 59.8836 137.228 59.1327 137.228C57.813 137.228 56.8384 136.917 56.2088 136.295C55.5793 135.673 55.2645 134.728 55.2645 133.462V127.352H53.6945V124.69H55.2645V121.63H59.0986ZM14.6602 160.905H9.18789L8.23223 164H3.96587L10.0412 147.435H13.7956L19.9164 164H15.6272L14.6602 160.905ZM10.1436 157.822H13.7045L11.9184 152.077L10.1436 157.822ZM26.1623 161.27C26.7008 161.27 27.118 161.125 27.4138 160.837C27.7096 160.541 27.8537 160.132 27.8461 159.608H31.4412C31.4412 160.959 30.9558 162.066 29.985 162.931C29.0217 163.795 27.7778 164.228 26.2533 164.228C24.4633 164.228 23.0526 163.666 22.0211 162.544C20.9896 161.421 20.4738 159.866 20.4738 157.879V157.72C20.4738 156.476 20.7014 155.38 21.1564 154.432C21.6191 153.476 22.2828 152.744 23.1474 152.236C24.0121 151.72 25.036 151.463 26.2192 151.463C27.8195 151.463 29.09 151.906 30.0305 152.794C30.971 153.681 31.4412 154.883 31.4412 156.4H27.8461C27.8461 155.763 27.6906 155.274 27.3796 154.933C27.0687 154.591 26.6515 154.421 26.1282 154.421C25.1346 154.421 24.5544 155.054 24.3875 156.321C24.3344 156.723 24.3079 157.276 24.3079 157.982C24.3079 159.218 24.4558 160.075 24.7516 160.553C25.0474 161.031 25.5176 161.27 26.1623 161.27ZM39.9967 164C39.8602 163.75 39.7388 163.382 39.6326 162.896C38.9272 163.784 37.9412 164.228 36.6746 164.228C35.5142 164.228 34.5282 163.879 33.7166 163.181C32.905 162.475 32.4993 161.592 32.4993 160.53C32.4993 159.195 32.9923 158.186 33.9783 157.504C34.9643 156.821 36.3978 156.48 38.2788 156.48H39.462V155.831C39.462 154.701 38.9728 154.136 37.9943 154.136C37.0842 154.136 36.6291 154.584 36.6291 155.479H32.7951C32.7951 154.288 33.2994 153.321 34.3082 152.578C35.3245 151.834 36.6177 151.463 38.1877 151.463C39.7578 151.463 40.9979 151.846 41.908 152.612C42.8182 153.378 43.2846 154.428 43.3074 155.763V161.213C43.3225 162.343 43.497 163.207 43.8307 163.807V164H39.9967ZM37.5961 161.497C38.074 161.497 38.4684 161.395 38.7793 161.19C39.0979 160.985 39.3254 160.754 39.462 160.496V158.528H38.347C37.0121 158.528 36.3447 159.127 36.3447 160.325C36.3447 160.674 36.4622 160.959 36.6974 161.179C36.9325 161.391 37.2321 161.497 37.5961 161.497ZM44.957 157.754C44.957 155.805 45.378 154.269 46.2199 153.146C47.0618 152.024 48.2374 151.463 49.7467 151.463C50.8465 151.463 51.7718 151.895 52.5227 152.76V146.525H56.3681V164H52.9209L52.7275 162.68C51.9387 163.712 50.9375 164.228 49.724 164.228C48.2601 164.228 47.0997 163.666 46.2426 162.544C45.3856 161.421 44.957 159.825 44.957 157.754ZM48.7911 157.993C48.7911 160.177 49.4282 161.27 50.7024 161.27C51.5519 161.27 52.1586 160.913 52.5227 160.2V155.513C52.1738 154.785 51.5746 154.421 50.7251 154.421C49.5419 154.421 48.901 155.376 48.8024 157.288L48.7911 157.993ZM64.5026 164.228C62.6141 164.228 61.0858 163.666 59.9177 162.544C58.7497 161.414 58.1657 159.946 58.1657 158.141V157.822C58.1657 156.563 58.397 155.452 58.8597 154.489C59.3299 153.526 60.0125 152.782 60.9075 152.259C61.8025 151.728 62.8644 151.463 64.0931 151.463C65.8224 151.463 67.1876 152.001 68.1888 153.078C69.1899 154.148 69.6905 155.642 69.6905 157.561V159.051H62.068C62.2045 159.741 62.5041 160.284 62.9667 160.678C63.4294 161.072 64.0286 161.27 64.7643 161.27C65.9778 161.27 66.9259 160.845 67.6085 159.995L69.3606 162.066C68.8828 162.726 68.2039 163.253 67.3241 163.647C66.4519 164.034 65.5114 164.228 64.5026 164.228ZM64.0703 154.421C62.9478 154.421 62.2803 155.164 62.068 156.65H65.9361V156.355C65.9513 155.74 65.7958 155.266 65.4697 154.933C65.1435 154.591 64.6771 154.421 64.0703 154.421ZM74.867 151.69L74.9922 153.135C75.8644 152.02 77.0362 151.463 78.5077 151.463C80.0625 151.463 81.113 152.081 81.6591 153.317C82.4934 152.081 83.6993 151.463 85.277 151.463C87.7723 151.463 89.0541 152.972 89.1224 155.991V164H85.277V156.23C85.277 155.6 85.1708 155.141 84.9584 154.853C84.746 154.565 84.3592 154.421 83.7979 154.421C83.0395 154.421 82.4744 154.758 82.1028 155.433L82.1142 155.592V164H78.2687V156.252C78.2687 155.608 78.1664 155.141 77.9616 154.853C77.7568 154.565 77.3662 154.421 76.7897 154.421C76.054 154.421 75.4928 154.758 75.106 155.433V164H71.2719V151.69H74.867ZM96.233 158.63L98.2808 151.69H102.388L97.3707 166.059L97.1545 166.583C96.4415 168.175 95.1825 168.972 93.3773 168.972C92.8768 168.972 92.3496 168.896 91.7959 168.744V166.002H92.2965C92.835 166.002 93.2446 165.923 93.5252 165.763C93.8135 165.612 94.0258 165.335 94.1624 164.933L94.4695 164.114L90.1918 151.69H94.2875L96.233 158.63Z"
            fill="#333366"
          />
          <path
            d="M71.3629 132.597C71.3629 132.013 71.1544 131.558 70.7372 131.232C70.3276 130.906 69.6033 130.568 68.5642 130.219C67.5251 129.87 66.6756 129.533 66.0158 129.207C63.8693 128.153 62.7961 126.704 62.7961 124.861C62.7961 123.943 63.0616 123.135 63.5925 122.438C64.131 121.732 64.8894 121.186 65.8679 120.799C66.8463 120.405 67.9461 120.208 69.1672 120.208C70.358 120.208 71.4236 120.42 72.3641 120.845C73.3122 121.269 74.0479 121.876 74.5712 122.665C75.0946 123.446 75.3562 124.341 75.3562 125.35H71.3743C71.3743 124.675 71.1657 124.152 70.7486 123.78C70.339 123.408 69.7815 123.223 69.0762 123.223C68.3632 123.223 67.7982 123.382 67.381 123.7C66.9714 124.011 66.7666 124.41 66.7666 124.895C66.7666 125.32 66.9942 125.706 67.4493 126.055C67.9043 126.397 68.7045 126.753 69.8498 127.125C70.9951 127.489 71.9356 127.883 72.6713 128.308C74.4613 129.34 75.3562 130.762 75.3562 132.574C75.3562 134.023 74.8102 135.161 73.718 135.987C72.6258 136.814 71.1278 137.228 69.2241 137.228C67.8816 137.228 66.6643 136.989 65.5721 136.511C64.4875 136.025 63.6683 135.366 63.1146 134.531C62.5686 133.689 62.2955 132.722 62.2955 131.63H66.3002C66.3002 132.517 66.5277 133.174 66.9828 133.598C67.4455 134.015 68.1926 134.224 69.2241 134.224C69.8839 134.224 70.4035 134.084 70.7827 133.803C71.1695 133.515 71.3629 133.113 71.3629 132.597ZM76.7442 130.731C76.7442 129.503 76.9832 128.41 77.461 127.455C77.9388 126.491 78.6252 125.752 79.5202 125.236C80.4152 124.72 81.4657 124.463 82.6716 124.463C84.5147 124.463 85.9672 125.035 87.029 126.181C88.0908 127.318 88.6218 128.869 88.6218 130.834V130.97C88.6218 132.889 88.0871 134.414 87.0176 135.544C85.9558 136.666 84.5147 137.228 82.6944 137.228C80.9423 137.228 79.5354 136.704 78.4735 135.658C77.4117 134.603 76.839 133.177 76.7556 131.38L76.7442 130.731ZM80.5783 130.97C80.5783 132.108 80.7565 132.942 81.113 133.473C81.4695 134.004 81.9966 134.27 82.6944 134.27C84.0596 134.27 84.7574 133.219 84.7877 131.118V130.731C84.7877 128.524 84.0824 127.421 82.6716 127.421C81.3898 127.421 80.6958 128.372 80.5896 130.276L80.5783 130.97ZM91.1588 137V127.352H89.3727V124.69H91.1588V123.712C91.1588 122.309 91.5722 121.22 92.3989 120.447C93.2256 119.673 94.3861 119.286 95.8803 119.286C96.4264 119.286 97.0256 119.366 97.6778 119.525L97.6892 122.346C97.4541 122.278 97.1393 122.244 96.7449 122.244C95.5845 122.244 95.0042 122.745 95.0042 123.746V124.69H97.4048V127.352H95.0042V137H91.1588ZM103.218 121.63V124.69H105.243V127.352H103.218V132.984C103.218 133.447 103.302 133.769 103.469 133.951C103.636 134.133 103.965 134.224 104.458 134.224C104.838 134.224 105.156 134.201 105.414 134.156V136.898C104.724 137.118 104.003 137.228 103.253 137.228C101.933 137.228 100.958 136.917 100.329 136.295C99.6991 135.673 99.3844 134.728 99.3844 133.462V127.352H97.8143V124.69H99.3844V121.63H103.218Z"
            fill="#FE9901"
          />
        </g>
        <defs>
          <clipPath id="clip0">
            <rect width="113.38" height="169.99" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </b-navbar-brand>

    <b-navbar-toggle target="nav-collapse">
      <template #default="{ expanded }">
        <b-icon v-if="expanded" icon="x"></b-icon>
        <b-icon v-else icon="list"></b-icon>
      </template>
    </b-navbar-toggle>

    <b-collapse id="nav-collapse" is-nav>
      <b-navbar-nav>
        <b-nav-item :to="localePath('/about')">
          {{ $t('navbar.AboutUs') }}</b-nav-item
        >
        <b-nav-item :to="localePath(`/courses`)">
          {{ $t('navbar.AllCourses') }}
        </b-nav-item>
        <!-- <b-nav-item :to="localePath('/pricing')">
          {{ $t('navbar.PlansAndPricing') }}
        </b-nav-item> -->
        <b-nav-item-dropdown :text="$t('navbar.Careers')" left>
          <!-- <b-dropdown-item :to="localePath('/inProcess')"
            >Become a mentor
          </b-dropdown-item> -->
          <b-dropdown-item :to="localePath('/instructors')"
            >Become an instructor</b-dropdown-item
          >
        </b-nav-item-dropdown>
        <b-nav-item :to="localePath(`/partner-application`)">
          {{ $t('navbar.Partner') }}
        </b-nav-item>
        <b-nav-item :to="localePath('/contact-us')">
          {{ $t('navbar.ContactUs') }}</b-nav-item
        >
      </b-navbar-nav>

      <b-navbar-nav class="ml-auto" v-if="$auth.loggedIn">
        <language-switcher class="mt-1" />
        <b-nav-item :to="localePath('/')"
          ><img
            class="w-7 h-7"
            src="~assets/svgs/search.svg"
            alt="notification"
        /></b-nav-item>
        <b-nav-item :to="localePath('/')"
          ><img class="w-7 h-7" src="~assets/svgs/korzinka.svg" alt="korzinka"
        /></b-nav-item>
        <b-nav-item :to="localePath('/')"
          ><img
            class="w-7 h-7"
            src="~assets/svgs/notification.svg"
            alt="korzinka"
        /></b-nav-item>
        <b-dropdown
          size="md"
          variant="none"
          toggle-class="text-decoration-none"
          no-caret
          right
        >
          <template #button-content>
            <img
              src="~assets/images/user_profile.png"
              class="w-10 h-10"
              alt="user-profile"
            />
          </template>
          <b-dropdown-header id="dropdown-header-label">
            <div class="flex flex-row">
              <img
                src="~assets/images/user_profile.png"
                class="w-10 h-10"
                alt="facebook"
              />
              <p class="user-fullname-text ml-3">
                <span>
                  {{
                    $auth.user.user
                      ? $auth.user.user.first_name
                      : $auth.user.mentor
                      ? mentorFullName.fName
                      : null
                  }}
                  {{
                    $auth.user.user
                      ? $auth.user.user.last_name
                      : $auth.user.mentor
                      ? mentorFullName.lName
                      : null
                  }}
                </span>
                <br />
                <span class="user-email-text">
                  {{
                    $auth.user.user
                      ? $auth.user.user.phone_number
                      : $auth.user.mentor
                      ? $auth.user.mentor.phone_number
                      : null
                  }}
                </span>
              </p>
            </div>
          </b-dropdown-header>
          <b-dropdown-divider></b-dropdown-divider>
          <div v-if="$auth.user.user">
            <b-dropdown-item :to="localePath('/useraccount/mylearning')"
              >My Learning
            </b-dropdown-item>
            <b-dropdown-item :to="localePath('/useraccount/mycart')"
              >My Cart</b-dropdown-item
            >
            <b-dropdown-item :to="localePath('/useraccount/mynotifications')"
              >Notifications</b-dropdown-item
            >
            <b-dropdown-item :to="localePath('#')">Messages</b-dropdown-item>
            <b-dropdown-item :to="localePath('/userprofile')"
              >Account settings</b-dropdown-item
            >
            <b-dropdown-item :to="localePath('/useraccount/mypurchase')"
              >Purchage history</b-dropdown-item
            >
          </div>
          <div v-if="$auth.user.mentor">
            <b-dropdown-item :to="localePath('/instructor-page/courses')"
              >My courses
            </b-dropdown-item>
            <b-dropdown-item :to="localePath('/instructor-page/performance')"
              >Performance</b-dropdown-item
            >
            <b-dropdown-item :to="localePath('/instructor-page/tools/profile')"
              >Account settings</b-dropdown-item
            >
          </div>
          <b-dropdown-item to="/" @click.prevent="showLogOutInfo()"
            >Logout</b-dropdown-item
          >
        </b-dropdown>
      </b-navbar-nav>

      <b-navbar-nav class="ml-auto" v-else>
        <language-switcher class="mt-1 mr-2" />
        <b-nav-item class="btn-login" :to="localePath('/auth/login')">
          {{ $t('navbar.logIn') }}</b-nav-item
        >
        <b-nav-item class="btn-sign-up" :to="localePath('/auth/signUp')">
          {{ $t('navbar.signUp') }}</b-nav-item
        >
      </b-navbar-nav>
    </b-collapse>
  </b-navbar>
</template>

<script>
import Toast from '~/utils/toast.js'
import LanguageSwitcher from '~/components/navbar/LanguageSwitcher'
export default {
  components: { LanguageSwitcher },
  mixins: [Toast],
  data() {
    return {
      loggedIn: false,
      isActive: null,
    }
  },

  methods: {
    showLogOutInfo() {
      this.$auth.logout()
      this.$store.dispatch('instructorsPage/clearPhoneNumber')
      this.$store.dispatch('instructorsPage/clearMentorProfile')
      this.showToast('info', 'Xabar', 'Akkauntdan chiqdingiz')
    },
  },

  computed: {
    mentorFullName() {
      const fullName = this.$auth.user.mentor.user.split(' ')
      return {
        fName: fullName[0],
        lName: fullName[1],
      }
    },
  },
}
</script>

<style scoped>
.dropdown-fade-enter-active,
.dropdown-fade-leave-active {
  transition: all 0.1s ease-in-out;
}
.dropdown-fade-enter,
.dropdown-fade-leave-to {
  opacity: 0;
  transform: translateY(-12px);
}
</style>
